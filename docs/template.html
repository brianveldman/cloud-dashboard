<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud-dashboard.com</title>
    <link href="style.css" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2280%22>‚òÅÔ∏è</text></svg>">
</head>
<body>
    <div class="header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1>
                        <i class="fab fa-microsoft"></i> Cloud Dashboard
                    </h1>
                    <p class="mb-0">Updates from official sources every 3 hours</p>
                     <p class="mb-0"> Created by <a href="https://www.linkedin.com/in/brian-veldman">Brian Veldman</a></p>
                </div>
                <div class="col-md-4 text-md-end">
                    <small>Last updated: {{LAST_UPDATED}}</small>
                </div>
            </div>
        </div>
        <button class="theme-toggle" onclick="toggleTheme()">
            <i class="fas fa-sun" id="themeIcon"></i>
            <span id="themeText">Light Mode</span>
        </button>
    </div>

    <div class="container">
        <!-- Stats Overview -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="stats-card">
                    <h3><i class="fas fa-newspaper"></i></h3>
                    <h4>{{TOTAL_UPDATES}}</h4>
                    <p class="mb-0">Total Updates</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card">
                    <h3><i class="fas fa-rss"></i></h3>
                    <h4>6</h4>
                    <p class="mb-0">Active Sources</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card">
                    <h3><i class="fas fa-clock"></i></h3>
                    <h4>3 Hours</h4>
                    <p class="mb-0">Update Interval</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card">
                    <h3><i class="fas fa-sync-alt"></i></h3>
                    <h4>Auto</h4>
                    <p class="mb-0">Refresh</p>
                </div>
            </div>
        </div>

        <div class="filter-section">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <input type="text" id="searchInput" class="form-control search-box" 
                           placeholder="üîç Search updates...">
                </div>
                <div class="col-md-6">
                    <div class="select-wrapper">
                        <select id="sourceFilter" class="form-select">
                            <option value="">All sources</option>
                            <option value="Azure Updates">Azure Updates</option>
                            <option value="Azure Architecture">Azure Architecture</option>
                            <option value="Azure Status">Azure Status</option>
                            <option value="Azure Blog">Azure Blog</option>
                            <option value="Microsoft 365">Microsoft 365</option>
                            <option value="Security">Security</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <div id="updatesContainer">
            {{UPDATES_CONTENT}}
        </div>

        <div class="text-center mt-4">
            <small class="text-muted">
                This dashboard is automatically updated every 3 hours via GitHub Actions - Feel free to star the repository.<br>
                <a href="https://github.com/brianveldman/azure-updates" target="_blank" class="github-link">
                    <i class="fab fa-github"></i> View on GitHub
                </a>
            </small>
        </div>
    </div>

    <script>
        // Theme toggle functionality
        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.getElementById('themeIcon');
            const themeText = document.getElementById('themeText');
            
            body.classList.toggle('light-mode');
            
            if (body.classList.contains('light-mode')) {
                themeIcon.className = 'fas fa-moon';
                themeText.textContent = 'Dark Mode';
                localStorage.setItem('theme', 'light');
            } else {
                themeIcon.className = 'fas fa-sun';
                themeText.textContent = 'Light Mode';
                localStorage.setItem('theme', 'dark');
            }
        }

        // Load saved theme
        function loadTheme() {
            const savedTheme = localStorage.getItem('theme');
            const body = document.body;
            const themeIcon = document.getElementById('themeIcon');
            const themeText = document.getElementById('themeText');
            
            if (savedTheme === 'light') {
                body.classList.add('light-mode');
                themeIcon.className = 'fas fa-moon';
                themeText.textContent = 'Dark Mode';
            }
        }

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', filterUpdates);
        document.getElementById('sourceFilter').addEventListener('change', filterUpdates);

        function filterUpdates() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const sourceFilter = document.getElementById('sourceFilter').value;
            const cards = document.querySelectorAll('.update-card');

            cards.forEach(card => {
                const title = card.querySelector('h5').textContent.toLowerCase();
                const description = card.querySelector('p').textContent.toLowerCase();
                const source = card.getAttribute('data-source');

                const matchesSearch = title.includes(searchTerm) || description.includes(searchTerm);
                const matchesSource = !sourceFilter || source === sourceFilter;

                if (matchesSearch && matchesSource) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Initialize theme on page load
        document.addEventListener('DOMContentLoaded', loadTheme);
    </script>
</body>
</html>
